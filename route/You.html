<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>유관순 발자취 예제</title>
    <script
      type="text/javascript"
      src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=9c9fb588b9138bcbd0cd56120ecc523d&libraries=services"
    ></script>
    <script>
      var map;
      var infowindow;
      var currentMarker = null;

      function initialize() {
        map = new kakao.maps.Map(document.getElementById("map"), {
          center: new kakao.maps.LatLng(34.7465, 127.7329),
          level: 12,
        });

        infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });

        var places = [
          {
            name: "독립기념관",
            latLng: new kakao.maps.LatLng(36.781872, 127.2303981),
            img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Independence_Hall_of_Korea_01.JPG/1200px-Independence_Hall_of_Korea_01.JPG",
            desc: "한국 독립운동의 역사를 전시한 대표 기념관입니다.",
          },
          {
            name: "이동녕 선생 생가지",
            latLng: new kakao.maps.LatLng(36.7795, 127.228),
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4JmvFaHezpOndvXEdEQllw3yCYi0LW8Lomw&s",
            desc: "대한민국 임시정부 의정원장을 지낸 이동녕 선생의 생가입니다.",
          },
          {
            name: "아우내장터",
            latLng: new kakao.maps.LatLng(36.776, 127.281),
            img: "https://www.gospeltoday.co.kr/news/photo/201902/3167_6645_4450.jpg",
            desc: "1919년 3·1운동 당시 유관순 열사가 만세운동을 펼친 장소입니다.",
          },
          {
            name: "조병옥 박사 생가",
            latLng: new kakao.maps.LatLng(36.775, 127.275),
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRooopt2o0sBbmsZV4rLr16z0knj7m2hUcmGA&s",
            desc: "민주주의 발전에 기여한 조병옥 박사의 생가입니다.",
          },
          {
            name: "천안 유관순 열사 유적",
            latLng: new kakao.maps.LatLng(36.774, 127.28),
            img: "https://cheonan.grandculture.net/Image?localName=cheonan&id=GC045P01224&t=middle",
            desc: "유관순 열사의 생가와 기념관이 있는 유적지입니다.",
          },
        ];

        var bounds = new kakao.maps.LatLngBounds();
        places.forEach(function (place) {
          bounds.extend(place.latLng);
        });
        map.setBounds(bounds);

        var path = places.map(function (place) {
          return place.latLng;
        });

        var polyline = new kakao.maps.Polyline({
          path: path,
          strokeWeight: 5,
          strokeColor: "#FF0000",
          strokeOpacity: 1,
          strokeStyle: "solid",
        });
        polyline.setMap(map);

        places.forEach(function (place) {
          var marker = new kakao.maps.Marker({
            position: place.latLng,
            map: map,
          });

          kakao.maps.event.addListener(marker, "click", function () {
            if (infowindow.getMap() && currentMarker === marker) {
              infowindow.close();
              currentMarker = null;
            } else {
              var content =
                '<div style="padding:10px; width:250px; height:300px;">' +
                "<strong>" +
                place.name +
                "</strong><br>" +
                '<img src="' +
                place.img +
                '" style="width:100%; height:auto; max-height:150px; margin-top:5px;"><br>' +
                "<p style='margin-top:5px;'>" +
                place.desc +
                "</p></div>";

              infowindow.setContent(content);
              infowindow.open(map, marker);
              currentMarker = marker;
            }
          });
        });

        kakao.maps.event.addListener(map, "click", function () {
          infowindow.close();
          currentMarker = null;
        });
      }

      window.onload = initialize;
    </script>
  </head>
  <body>
    <a href="../main.html">메인</a>
    <div id="map" style="width: 100%; height: 600px"></div>
  </body>
</html>
